<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/jqueryui/jquery-ui.js"></script>
<script src="~/jquery.fancytree/jquery.fancytree-all-deps.js"></script>

<link href="~/jqueryui" rel="stylesheet" />
<link href="~/jquery.fancytree/skin-win8-xxl/ui.fancytree.css" rel="stylesheet" />
@*<link href="~/jquery.fancytree/skin-win8/ui.fancytree.css" rel="stylesheet" />*@
  
  @{
}

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@


<div id="ViewContents">
    <h1>Folder Contents Page</h1>
@*
    Put PC view here
*@
<div  id="PcContents">
    <div id="nav-tree" data-source="ajax" class="sampletree" style="background-color:red;">
        @*<div id="nav-tree" data-source="ajax" class="sampletree" style="width:25%;background-color:red;">*@
  </div>
@*    <div id="pane-view" style="background-color:aqua;margin-left:25%;"></div>*@
</div>
@*
    Put mobile view here
*@
<div id="MobileContents">
    <div id="PaneView"></div>
</div>
</div>

<script type="text/javascript">
//if ($("#nav-tree").length) 
//{
$(function () {
      function lazyLoad(event, data) {
          data.result = $.ajax({
            url: "/FolderContents/GetFancyTreeNode",//"/FolderContents/GetFancyTreeNode?key=%s"
            data: {key: data.node.key}
            //success: function(data) {
            //display_false()
            //alert(4 - "returned");
            //}
        })
      //switch (data.node.key) {
      //  case "ajax":
      //      data.result = { url: "/FolderContents/GetFancyTreeRoot/" /*, debugDelay: 5000*/ };
      //    //data.result = $.ajax({
      //    //  url: "https://wwwendt.de/tech/fancytree/demo/ajax-sub2.json",
      //    //  dataType: "json"
      //    //  });
      //    break;
      //  case "custom":
      //    data.result = $.Deferred(function (dfd) {
      //      setTimeout(function () {
      //        dfd.resolve([
      //          { title: "Sub item 1" },
      //          { title: "Sub item 2" }
      //        ]);
      //      }, 1000);
      //    });
      //    break;
      //  case "ajax-error":
      //    data.result = { url: "not-found.json" };
      //    break;
      //  case "custom-error":
      //    data.result = $.Deferred(function (dfd) {
      //      setTimeout(function () {
      //        dfd.reject(new Error("TEST ERROR"));
      //      }, 1000);
      //    });
      //    break;
      //  default:
      //    data.result = [];
      //}
    }

    $("#nav-tree").fancytree
    ({
        source: $.ajax({
            url: "/FolderContents/GetFancyTreeNode"//,
            //dataType: "json"
        }),
        ajax: { debugDelay: 1000 },
        //minExpandLevel: 0,
        //postinit: function(isReloading, isError) {
        //    this.reactivate();
        //},
        //focus: function(event, data) {
        //    // Auto-activate focused node after 2 seconds
        //    data.node.scheduleAction("activate", 2000);
        //},
        activate: function(event, data) 
        {
            alert("activated");
            var node = data.node;
            /* Use <a> href and target attributes to load the content:*/
            if( node.data.href )
            {
                /*open in same tab*/
                window.location=node.data.href;
                /* Open target in NEW Tab */
                //window.open(node.data.href, node.data.target);
                /* or open target in iframe */
                //$("[name=contentFrame]").attr("src", node.data.href);
            }
        },
        lazyLoad: lazyLoad
    });
});
//}
</script>